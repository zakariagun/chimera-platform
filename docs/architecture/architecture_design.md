# ุงููุฎุทุท ุงููุนูุงุฑู ุงููุชูุงูู ูููุตุฉ Chimera

## ๐๏ธ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุจููุฉ

ููุตุฉ Chimera ูู ูุธุงู ูุชูุงูู ูุชูููุฏ ุงูุชููููุงุช ุงูุงุญุชุฑุงููุฉ ูุนูู ููู ูุจุฏุฃ "ูู ุงูููุฑุฉ ุฅูู ุงูุฅูุชุงุฌ ุงููุงูู" ุนุจุฑ ูุฑุงุญู ูุชุชุงููุฉ ูุน ููุงุท ููุงููุฉ ุงููุณุชุฎุฏู.

---

## ๐ ุงูุจููุฉ ุงูุนุงูุฉ ูููุธุงู

```mermaid
graph TB
    A[ูุงุฌูุฉ ุงููุณุชุฎุฏู - Frontend] --> B[API Gateway]
    B --> C[ูุธุงู ุฅุฏุงุฑุฉ ุงููุดุงุฑูุน]
    C --> D[ูุญุฑู ุชุญููู ุงููุณุงุฆุท]
    C --> E[ูุธุงู Workflow ุงููุชุฏุฑุฌ]
    E --> F[ูุญุฑูุงุช ุชูููุฏ ุงูุชููููุงุช]
    F --> G[ูุธุงู ุถูุงู ุงูุฌูุฏุฉ]
    G --> H[ูุธุงู ุงูุชุตุฏูุฑ ูุงูุชูุงุฑูุฑ]
    
    I[ุฅุฏุงุฑุฉ APIs ุงูุฎุงุฑุฌูุฉ] --> B
    J[ูุงุนุฏุฉ ุงูุจูุงูุงุช] --> C
    K[ูุธุงู ุงููููุงุช ูุงููุณุงุฆุท] --> D
```

---

## ๐ ุชุตููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ:

#### 1. ุฌุฏูู ุงููุณุชุฎุฏููู (users)
```sql
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) UNIQUE NOT NULL,
    username VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    subscription_plan ENUM('free', 'pro', 'enterprise') DEFAULT 'free',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 2. ุฌุฏูู ููุงุชูุญ APIs (api_keys)
```sql
CREATE TABLE api_keys (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    provider ENUM('google_ai_studio', 'openrouter') NOT NULL,
    key_name VARCHAR(100) NOT NULL,
    encrypted_api_key TEXT NOT NULL,
    is_active BOOLEAN DEFAULT true,
    usage_count INTEGER DEFAULT 0,
    rate_limit_remaining INTEGER DEFAULT 1000,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 3. ุฌุฏูู ุงููุดุงุฑูุน (projects)
```sql
CREATE TABLE projects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    initial_idea TEXT NOT NULL,
    project_type ENUM('video', 'audio', 'image', 'mixed') NOT NULL,
    status ENUM('idea', 'script', 'prompts', 'completed', 'exported') DEFAULT 'idea',
    current_stage INTEGER DEFAULT 1,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 4. ุฌุฏูู ูุฑุงุญู ุงูุนูู (workflow_stages)
```sql
CREATE TABLE workflow_stages (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
    stage_number INTEGER NOT NULL,
    stage_name VARCHAR(100) NOT NULL,
    stage_type ENUM('idea_expansion', 'script_generation', 'research', 'video_prompts', 'image_prompts', 'audio_prompts', 'review') NOT NULL,
    input_data JSONB,
    output_data JSONB,
    status ENUM('pending', 'in_progress', 'completed', 'approved', 'rejected') DEFAULT 'pending',
    user_feedback TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP
);
```

#### 5. ุฌุฏูู ุงูุดุฎุตูุงุช (characters)
```sql
CREATE TABLE characters (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
    character_name VARCHAR(100) NOT NULL,
    physical_description TEXT NOT NULL,
    personality_traits TEXT,
    voice_characteristics TEXT,
    consistency_key TEXT NOT NULL, -- ููุญูุงุธ ุนูู ุชูุงุณู ุงูุดุฎุตูุฉ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 6. ุฌุฏูู ุงูุชููููุงุช ุงููููุฏุฉ (generated_prompts)
```sql
CREATE TABLE generated_prompts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
    stage_id UUID REFERENCES workflow_stages(id) ON DELETE CASCADE,
    prompt_type ENUM('video', 'image', 'audio', 'music', 'sfx') NOT NULL,
    target_platform VARCHAR(50) NOT NULL, -- veo3, imagen4, elevenlabs, etc.
    prompt_text TEXT NOT NULL,
    prompt_parameters JSONB, -- ูุนุงููุงุช ุฅุถุงููุฉ
    quality_score DECIMAL(3,2),
    scene_number INTEGER,
    character_id UUID REFERENCES characters(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 7. ุฌุฏูู ุงููุณุงุฆุท ุงููุฑููุนุฉ (uploaded_media)
```sql
CREATE TABLE uploaded_media (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
    file_path VARCHAR(500) NOT NULL,
    file_type ENUM('image', 'video', 'audio') NOT NULL,
    file_size BIGINT NOT NULL,
    analysis_result JSONB, -- ูุชุงุฆุฌ ุชุญููู ุงููุณุงุฆุท
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

---

## ๐ ูุธุงู Workflow ุงููุชุฏุฑุฌ

### ูุฑุงุญู ุงูุนูู ุงูุฃุณุงุณูุฉ:

```mermaid
graph TD
    A[ุงููุฑุญูุฉ 1: ุฅุฏุฎุงู ุงูููุฑุฉ] --> B{ุชุญููู ููุน ุงููุฏุฎู}
    B -->|ูุต| C[ุงููุฑุญูุฉ 2: ุชูุณูุน ุงูููุฑุฉ]
    B -->|ูุณุงุฆุท| D[ุงููุฑุญูุฉ 1.5: ุชุญููู ุงููุณุงุฆุท]
    D --> C
    C --> E[ููุงููุฉ ุงููุณุชุฎุฏู 1]
    E -->|ููุงูู| F[ุงููุฑุญูุฉ 3: ุงูุจุญุซ ูุงูุชูุซูู]
    E -->|ุฑูุถ| C
    F --> G[ููุงููุฉ ุงููุณุชุฎุฏู 2]
    G -->|ููุงูู| H[ุงููุฑุญูุฉ 4: ูุชุงุจุฉ ุงูุณููุงุฑูู]
    G -->|ุฑูุถ| F
    H --> I[ููุงููุฉ ุงููุณุชุฎุฏู 3]
    I -->|ููุงูู| J[ุงููุฑุญูุฉ 5: ุชูููุฏ ุงูุชููููุงุช]
    I -->|ุฑูุถ| H
    J --> K[ุงููุฑุญูุฉ 6: ูุฑุงุฌุนุฉ ุงูุฌูุฏุฉ]
    K --> L[ุงููุฑุญูุฉ 7: ุฅุฑุดุงุฏุงุช CapCut]
    L --> M[ุงูุชุตุฏูุฑ ุงูููุงุฆู]
```

### ุชูุงุตูู ูู ูุฑุญูุฉ:

#### ุงููุฑุญูุฉ 1: ุฅุฏุฎุงู ุงูููุฑุฉ
- **ุงููุฏุฎู**: ููุฑุฉ ูุตูุฉ ุฃู ูุณุงุฆุท (ุตูุฑ/ููุฏูู/ุตูุช)
- **ุงููุนุงูุฌุฉ**: ุชุญููู ูุชุตููู ููุน ุงููุญุชูู
- **ุงููุฎุฑุฌ**: ููุฑุฉ ููุธูุฉ ูุน ุชุญุฏูุฏ ุงูููุน ูุงูุฃูุฏุงู

#### ุงููุฑุญูุฉ 1.5: ุชุญููู ุงููุณุงุฆุท (ุฅุฐุง ูุฌุฏุช)
- **ุงููุฏุฎู**: ูููุงุช ูุณุงุฆุท
- **ุงููุนุงูุฌุฉ**: 
  - ุชุญููู ุงูุตูุฑ ููุงุณุชุฎุฑุงุฌ ุงูุจุตุฑู
  - ุชุญููู ุงูููุฏูู ููุฃุณููุจ ูุงูุญุฑูุฉ
  - ุชุญููู ุงูุตูุช ูููุจุฑุฉ ูุงููุดุงุนุฑ
- **ุงููุฎุฑุฌ**: ูุตู ุชูุตููู ููุนูุงุตุฑ ุงููุณุชุฎุฑุฌุฉ

#### ุงููุฑุญูุฉ 2: ุชูุณูุน ุงูููุฑุฉ
- **ุงููุฏุฎู**: ุงูููุฑุฉ ุงูุฃุณุงุณูุฉ + ุชุญููู ุงููุณุงุฆุท (ุฅู ูุฌุฏ)
- **ุงููุนุงูุฌุฉ**: ุงุณุชุฎุฏุงู AI ูุชูุณูุน ุงูููุฑุฉ ูุฅุถุงูุฉ ุชูุงุตูู
- **ุงููุฎุฑุฌ**: ููููู ููุณุน ูุน ุชุญุฏูุฏ ุงูุดุฎุตูุงุช ูุงูุจูุฆุฉ

#### ุงููุฑุญูุฉ 3: ุงูุจุญุซ ูุงูุชูุซูู (ุดุฑุทูุฉ)
- **ุงููุฏุฎู**: ุงูููููู ุงูููุณุน
- **ุงููุนุงูุฌุฉ**: ุจุญุซ ูู ุงูุฅูุชุฑูุช ูููุนูููุงุช ุงูุฏุงุนูุฉ
- **ุงููุฎุฑุฌ**: ุจูุงูุงุช ูุญูุงุฆู ููุซูุฉ ูุฏุนู ุงููุญุชูู

#### ุงููุฑุญูุฉ 4: ูุชุงุจุฉ ุงูุณููุงุฑูู
- **ุงููุฏุฎู**: ุงูููููู + ุงูุจุญุซ
- **ุงููุนุงูุฌุฉ**: ุฅูุดุงุก ุณููุงุฑูู ููุตู ูุน ุญูุงุฑุงุช ููุตู ูุดุงูุฏ
- **ุงููุฎุฑุฌ**: ุณููุงุฑูู ูุงูู ููุณู ููุดุงูุฏ

#### ุงููุฑุญูุฉ 5: ุชูููุฏ ุงูุชููููุงุช
- **ุงููุฏุฎู**: ุงูุณููุงุฑูู ุงููุนุชูุฏ
- **ุงููุนุงูุฌุฉ**: 
  - ุชุญููู ูู ูุดูุฏ
  - ุชูููุฏ ุชููููุงุช ูุชุฎุตุตุฉ ููู ููุตุฉ
  - ุถูุงู ุชูุงุณู ุงูุดุฎุตูุงุช
- **ุงููุฎุฑุฌ**: ุญุฒูุฉ ุดุงููุฉ ูู ุงูุชููููุงุช

#### ุงููุฑุญูุฉ 6: ูุฑุงุฌุนุฉ ุงูุฌูุฏุฉ
- **ุงููุฏุฎู**: ุงูุชููููุงุช ุงููููุฏุฉ
- **ุงููุนุงูุฌุฉ**: ุชูููู ุฌูุฏุฉ ุงูุชููููุงุช ููู ุงููุนุงููุฑ ุงููุญุฏุฏุฉ
- **ุงููุฎุฑุฌ**: ุชููููุงุช ูุญุณูุฉ ููุฑุงุฌุนุฉ

#### ุงููุฑุญูุฉ 7: ุฅุฑุดุงุฏุงุช CapCut
- **ุงููุฏุฎู**: ุงูุชููููุงุช ุงูููุงุฆูุฉ
- **ุงููุนุงูุฌุฉ**: ุฅูุดุงุก ุฏููู ูููุชุงุฌ ูุฎุตุต
- **ุงููุฎุฑุฌ**: ุฎุทุฉ ูููุชุงุฌ ุชูุตูููุฉ

---

## ๐ค ูุญุฑูุงุช ุชูููุฏ ุงูุชููููุงุช

### 1. ูุญุฑู ุชููููุงุช ุงูููุฏูู (Veo3 Engine)
```python
class Veo3PromptEngine:
    def __init__(self):
        self.style_templates = {
            'cinematic': 'cinematic lighting, dramatic angles, professional cinematography',
            'documentary': 'natural lighting, handheld camera, realistic movement',
            'commercial': 'bright lighting, stable shots, dynamic transitions'
        }
    
    def generate_video_prompt(self, scene_data, character_data, style_preference):
        # ุจูุงุก ุงูุชูููู ููู ุฃูุถู ุงูููุงุฑุณุงุช
        base_prompt = self._build_base_description(scene_data, character_data)
        camera_work = self._add_camera_techniques(scene_data['action'])
        lighting = self._determine_lighting(scene_data['environment'])
        style = self.style_templates.get(style_preference, '')
        
        return f"{base_prompt}. Camera: {camera_work}. Lighting: {lighting}. Style: {style}"
```

### 2. ูุญุฑู ุชููููุงุช ุงูุตูุฑ (Imagen4/Flux Engine)
```python
class ImagePromptEngine:
    def __init__(self):
        self.character_consistency_db = {}
    
    def generate_image_prompt(self, scene_data, character_id, platform='imagen4'):
        character_desc = self._get_consistent_character_description(character_id)
        environment = self._describe_environment(scene_data['location'])
        technical_params = self._get_platform_params(platform)
        
        return f"{character_desc} in {environment}. {technical_params}"
    
    def _get_consistent_character_description(self, character_id):
        # ุงุณุชุฑุฌุงุน ุงููุตู ุงูุซุงุจุช ููุดุฎุตูุฉ
        return self.character_consistency_db.get(character_id, "")
```

### 3. ูุญุฑู ุชููููุงุช ุงูุตูุช (ElevenLabs Engine)
```python
class AudioPromptEngine:
    def generate_voice_prompt(self, dialogue_data, character_voice, emotion):
        voice_settings = self._get_voice_settings(character_voice)
        emotion_tags = self._process_emotion(emotion)
        timing = self._add_timing_controls(dialogue_data['text'])
        
        return {
            'text': timing,
            'voice': voice_settings,
            'emotion': emotion_tags,
            'settings': self._get_quality_settings()
        }
```

---

## ๐ ูุธุงู ุฅุฏุงุฑุฉ APIs

### ูุฌูุน ุงูููุงุชูุญ (Key Pool System)
```python
class APIKeyManager:
    def __init__(self):
        self.key_pools = {
            'google_ai_studio': [],
            'openrouter': []
        }
        self.usage_tracker = {}
    
    def get_available_key(self, provider, user_id):
        user_keys = self._get_user_keys(user_id, provider)
        return self._select_best_key(user_keys)
    
    def track_usage(self, key_id, tokens_used):
        # ุชุชุจุน ุงูุงุณุชุฎุฏุงู ูุฅุฏุงุฑุฉ ุงูุญุฏูุฏ
        pass
    
    def rotate_keys(self, provider):
        # ุชุฏููุฑ ุงูููุงุชูุญ ููุงุณุชูุงุฏุฉ ุงููุตูู ูู ุงูุญุตุต ุงููุฌุงููุฉ
        pass
```

### ูุงุฌูุฉ API ุงูููุญุฏุฉ
```python
class UnifiedAPIClient:
    def __init__(self, key_manager):
        self.key_manager = key_manager
        self.providers = {
            'google_ai_studio': GoogleAIStudioClient(),
            'openrouter': OpenRouterClient()
        }
    
    async def generate_content(self, prompt, provider, user_id, model_params=None):
        api_key = self.key_manager.get_available_key(provider, user_id)
        client = self.providers[provider]
        
        try:
            result = await client.generate(prompt, api_key, model_params)
            self.key_manager.track_usage(api_key['id'], result['tokens_used'])
            return result
        except Exception as e:
            # ุงูุชุนุงูู ูุน ุงูุฃุฎุทุงุก ูุงูุชุจุฏูู ููููุชุงุญ ุงูุชุงูู
            return await self._handle_api_error(e, prompt, provider, user_id)
```

---

## ๐ฑ ุชุตููู ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ:

1. **ููุญุฉ ุงููุดุงุฑูุน**: ุนุฑุถ ุฌููุน ุงููุดุงุฑูุน ูุน ุญุงูุฉ ุงูุชูุฏู
2. **ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ**: ูููุฐุฌ ูุฅุฏุฎุงู ุงูููุฑุฉ ุงูุฃูููุฉ
3. **ูุงุฌูุฉ ุงููุดุฑูุน**: ุนุฑุถ ูุฑุงุญู ุงูุนูู ูุน ููุงุท ุงูููุงููุฉ
4. **ุฅุฏุงุฑุฉ ุงูููุงุชูุญ**: ูุงุฌูุฉ ูุฅุถุงูุฉ ูุฅุฏุงุฑุฉ ููุงุชูุญ APIs
5. **ููุชุจุฉ ุงูููุงูุจ**: ููุงูุจ ุฌุงูุฒุฉ ูููุดุงุฑูุน ุงููุฎุชููุฉ
6. **ุงูุชุตุฏูุฑ ูุงูุชูุงุฑูุฑ**: ุชุญููู ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ

### ูุงุฌูุฉ ุงูุนูู ุงูุชูุงุนููุฉ:
```mermaid
graph LR
    A[ุงููุฑุญูุฉ ุงูุญุงููุฉ] --> B[ูุนุงููุฉ ุงููุชูุฌุฉ]
    B --> C[ุฃุฒุฑุงุฑ ุงูุชุญูู]
    C --> D[ููุงูู/ุฑูุถ/ุชุนุฏูู]
    D --> E[ุงูุงูุชูุงู ูููุฑุญูุฉ ุงูุชุงููุฉ]
    
    F[ุดุฑูุท ุงูุชูุฏู] --> A
    G[ุณุฌู ุงููุฑุงุญู] --> B
    H[ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน] --> C
```

---

## ๐ ูุธุงู ุชุญููู ุงููุณุงุฆุท

### ูุญุฑู ุชุญููู ุงูุตูุฑ:
```python
class ImageAnalyzer:
    def analyze_image(self, image_path):
        # ุงุณุชุฎุฏุงู Google Vision API ุฃู similar
        results = {
            'objects': self._detect_objects(image_path),
            'faces': self._analyze_faces(image_path),
            'colors': self._extract_color_palette(image_path),
            'composition': self._analyze_composition(image_path),
            'style': self._detect_artistic_style(image_path)
        }
        return self._convert_to_prompt_elements(results)
```

### ูุญุฑู ุชุญููู ุงูููุฏูู:
```python
class VideoAnalyzer:
    def analyze_video(self, video_path):
        frames = self._extract_key_frames(video_path)
        results = {
            'scenes': self._segment_scenes(frames),
            'camera_movements': self._detect_camera_work(video_path),
            'lighting': self._analyze_lighting_patterns(frames),
            'subjects': self._track_subjects(video_path)
        }
        return self._convert_to_video_prompts(results)
```

---

## ๐ ูุธุงู ุถูุงู ุงูุฌูุฏุฉ

### ูุนุงููุฑ ุงูุชูููู:
```python
class QualityAssurance:
    def __init__(self):
        self.criteria = {
            'clarity': 0.2,      # 20% ูุฒู ูููุถูุญ
            'detail': 0.25,      # 25% ูุฒู ููุชูุตูู
            'consistency': 0.25, # 25% ูุฒู ููุชูุงุณู
            'technical': 0.15,   # 15% ูุฒู ููุฌูุฏุฉ ุงูุชูููุฉ
            'creativity': 0.15   # 15% ูุฒู ููุฅุจุฏุงุน
        }
    
    def evaluate_prompt(self, prompt_text, context):
        scores = {}
        for criterion, weight in self.criteria.items():
            scores[criterion] = self._evaluate_criterion(prompt_text, criterion, context)
        
        total_score = sum(score * self.criteria[criterion] 
                         for criterion, score in scores.items())
        
        return {
            'total_score': total_score,
            'breakdown': scores,
            'recommendations': self._generate_recommendations(scores)
        }
```

---

## ๐ ูุธุงู ุงููุดุฑ ูุงูุชุตุฏูุฑ

### ุฃููุงุน ุงูุชุตุฏูุฑ:
1. **ุชุตุฏูุฑ ูููุตู**: ููู ููู ููุน ุชูููู
2. **ุชุตุฏูุฑ ุดุงูู**: ุญุฒูุฉ ูุงุญุฏุฉ ุชุญุชูู ุนูู ูู ุดูุก
3. **ุชูุฑูุฑ ุชูุตููู**: ูุซููุฉ ุดุงููุฉ ูุน ุงูุฅุฑุดุงุฏุงุช
4. **ุฏููู CapCut**: ุฎุทุฉ ูููุชุงุฌ ูุฎุตุตุฉ

### ูููู ุงููููุงุช ุงููุตุฏุฑุฉ:
```
Project_Export/
โโโ 01_Project_Overview.md
โโโ 02_Script_and_Scenario.md
โโโ 03_Character_Consistency_Guide.md
โโโ Video_Prompts/
โ   โโโ Veo3_Prompts.txt
โ   โโโ Scene_Breakdown.json
โโโ Image_Prompts/
โ   โโโ Imagen4_Prompts.txt
โ   โโโ Flux_Prompts.txt
โ   โโโ Character_References.json
โโโ Audio_Prompts/
โ   โโโ ElevenLabs_Dialogues.txt
โ   โโโ Music_Prompts.txt
โ   โโโ SFX_Prompts.txt
โโโ CapCut_Guide/
    โโโ Editing_Instructions.md
    โโโ Timeline_Structure.json
    โโโ Assets_List.md
```

ูุฐุง ุงููุฎุทุท ุงููุนูุงุฑู ูููุฑ ุฃุณุงุณุงู ูุชููุงู ูุจูุงุก ููุตุฉ Chimera ุงููุชูุงููุฉ.